Task & Definition
- Implement Task 36: Resolve remaining security/detect-object-injection in @memento/api (ID: 2025-10-01.1).

Constraints/Risks
- Keep refactors minimal; avoid API changes.
- Rule flags bracket indexing even with TS unions; prefer switches, Maps, or fromEntries.

Code Searches
- rg targets (expected offender spots):
  - packages/api/src/mcp-router.ts:1635 (array index)
  - packages/api/src/websocket-router.ts:1117 (object dynamic key)
  - packages/api/src/routes/impact.ts:337-350 (object dynamic keys in reducers); also adjusted riskSummary at 322.
  - packages/api/src/routes/tests.ts:84 (object dynamic key lookups)
  - packages/api/src/routes/vdb.ts:142 (array index into metadata)

Implementation Notes
- mcp-router: replaced for-index with entries() iteration to avoid bracket index.
- websocket-router: replaced dynamic object writes with Object.fromEntries over Map.
- impact: expanded reducers into explicit property updates; replaced risk level tally with switch-case.
- tests: replaced trendPriority object bracket access with getTrendPriority() function.
- vdb: replaced metadata?.[index] with metadata.at(index).

Validation Evidence
- Run eslint scoped to api src and capture JSON log.
- Command: pnpm -s exec eslint 'packages/api/src/**/*.ts' -f json --max-warnings=-1 --no-error-on-unmatched-pattern > logs/lints/2025-10-01-Task36-eslint-api.json 2>&1

Open Follow-ups
- If any remaining detections appear in api, iterate similarly or document targeted disables with rationale.
Validation Evidence
- ESLint (api src-only) JSON log: logs/lints/2025-10-01-Task36-eslint-api.json
  - Search for 'security/detect-object-injection' returned none (0 findings).
- Workspace lint log: logs/lints/2025-10-01-Task36-workspace-lint.log (3059 lines)
  - Search for 'security/detect-object-injection' returned none under packages/api.
