# Task & Definition
- Task: 5. Complete Integration Test Synchronization [ID: 2025-09-29.5]
- Definition: Run the full integration test suite, categorize and fix failures, ensure backing services and fixtures are correct, and produce a coverage baseline. Update docs and TODO.

# Constraints/Risks
- Requires local Docker services (neo4j, postgres, redis, qdrant) per docker-compose.test.yml.
- High test output volume; logs must be redirected to files.
- Knowledge package still has type issues (Task 2025-09-29.8), but Vitest transpile should proceed; watch for runtime export gaps.
- Qdrant shim must support create/delete collection APIs used by tests.

# Code Searches
- rg: locate Task 5 and test suite entry points â†’ TODO.md lines show definition and acceptance.
- rg: usages of qdrant.createCollection/deleteCollection and deletePoints to patch shim.
- rg: identify incorrect imports in integration model tests referencing non-existent ../../src/services/DatabaseService.

# Web Searches
- None (offline execution; no external research needed for this slice).

# Implementation Notes
- Patched DatabaseService.qdrant shim: add createCollection, deleteCollection, deletePoints, and filter-based delete-all; kept no-op semantics with Neo4j-backed vectors.
- Added qdrant status to DatabaseService.healthCheck to satisfy test helpers.
- Fixed imports in tests/integration/models/* to target @memento/database/DatabaseService.

# Validation Evidence
- Pending: will run `docker compose -f docker-compose.test.yml up -d` then `RUN_INTEGRATION=1 NODE_ENV=test pnpm vitest run tests/integration --reporter=basic` and capture `logs/integration-full-<stamp>.log`.

# Open Follow-ups
- If coverage include patterns miss packages/*, adjust vitest.config.ts coverage.include to ["packages/**/src/**/*.ts"].
- If KnowledgeGraphService exports cause failures, triage under Task 2025-09-29.8 and link here.
