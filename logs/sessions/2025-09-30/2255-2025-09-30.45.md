Task & Definition
- Implement Task 25 from TODO.md: fix all ESLint `no-case-declarations` errors by wrapping switch case lexical declarations (`const/let`) within braces in packages/**/src/**/*.
- Acceptance: `pnpm -s lint` shows 0 `no-case-declarations` errors.

Constraints/Risks
- Monorepo depth/import rules apply; code changes limited to necessary wraps only.
- Avoid functional changes; only introduce braces around case bodies.
- Keep diffs minimal and readable; no refactors beyond scope.

Code Searches
- Cmd: rg -n -U "case [^:]+:\\s*(?:\\/\\/.*\\n)?\\s*(const|let)\\s" packages
  - Goal: Identify case labels where a lexical declaration follows directly.
  - Result: Matches in api/mcp-router.ts, api/websocket-router.ts, core/utils/embedding.ts, knowledge/src/parsing/{IncrementalParser,ASTParser}.ts, knowledge/src/ingestion/queue-manager.ts, sync/src/synchronization/SynchronizationCoordinator.ts, testing/src/{temporal/TestMetrics.ts,temporal/TestCIIntegration.ts,security/secrets-scanner.ts}; plus some tests under packages/knowledge/tests-*/ which are out-of-scope for this task.
- Cmd: sed/grep on logs/latest-lint.log around matches
  - Goal: Map ESLint error lines to file paths; confirm 16 error sites.
  - Result: Verified occurrences notably at:
    - packages/core/src/utils/embedding.ts:304,313
    - packages/testing/src/security/secrets-scanner.ts:775
    - packages/testing/src/temporal/TestMetrics.ts:622
    - packages/testing/src/temporal/TestCIIntegration.ts:763,784,803,823
    - packages/api/src/mcp-router.ts:4317
    - packages/api/src/websocket-router.ts:525
    - packages/knowledge/src/parsing/IncrementalParser.ts:407,446
    - packages/knowledge/src/parsing/ASTParser.ts:4738,4777
    - packages/knowledge/src/ingestion/queue-manager.ts:304,310,318
    - packages/sync/src/synchronization/SynchronizationCoordinator.ts:1781 (within combined 'create'/'modify' case)

Web Searches
- None (network disabled/restricted); not required for this task.

Implementation Notes
- Wrapped case bodies with `{ ... }` where lexical declarations were present.
- For fall-through labels (e.g., sync create/modify), opened block on the latter label and closed before the `break;` to preserve control flow.
- For cases that share default or fall-through to `default:`, wrapped the default block only (cannot nest `default:` inside braces as a label).
- Files touched:
  - packages/core/src/utils/embedding.ts
  - packages/testing/src/temporal/TestMetrics.ts
  - packages/testing/src/security/secrets-scanner.ts
  - packages/api/src/mcp-router.ts
  - packages/api/src/websocket-router.ts
  - packages/knowledge/src/parsing/IncrementalParser.ts
  - packages/knowledge/src/parsing/ASTParser.ts
  - packages/knowledge/src/ingestion/queue-manager.ts
  - packages/sync/src/synchronization/SynchronizationCoordinator.ts

Validation Evidence
- Cmd: pnpm -s lint > logs/latest-lint.log 2>&1
  - Assertion: `rg -n "no-case-declarations" logs/latest-lint.log` returns no matches (to be verified below).

Open Follow-ups
- If tests under packages/knowledge/tests-* also trigger `no-case-declarations`, consider follow-up Task to extend lint scope or apply same fix to tests if desired.
- Task 26 (no-useless-escape) remains outstanding in nearby files; see TODO.md.
