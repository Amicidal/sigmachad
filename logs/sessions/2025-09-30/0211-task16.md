Task & Definition
Constraints/Risks
Code Searches
Web Searches
Implementation Notes
Validation Evidence
Open Follow-ups
\n2025-09-30T02:11:55Z — Task & Definition
Fix missing local module imports in knowledge package parsing services (Task 16 / ID: 2025-09-30.3). Target imports like './utils', './types', './CacheManager', './RelationshipBuilder', './queries'; correct to @memento/utils, @memento/shared-types, or proper local paths. Validate with a focused type-check.
\n2025-09-30T02:11:55Z — Constraints/Risks
- Monorepo depth limits; no >3-level paths or ../../../ hops.\n- Avoid cross-package forbidden dependencies; keep within allowed aliases.\n- Concurrent agents may touch files; re-diff before sweeping changes.
\n2025-09-30T02:12:00Z — Code Searches
Command: rg -n 'from \'./(utils|types|CacheManager|RelationshipBuilder|queries)\'' packages/knowledge/src
Observed: 24 matches captured in /tmp/task16_import_hits.txt
- packages/knowledge/src/ingestion/worker-pool.ts:20:} from './types';
- packages/knowledge/src/services-index.ts:45:} from './types';
- packages/knowledge/src/services-index.ts:61:} from './utils';
- packages/knowledge/src/services-index.ts:64:export { CacheManager } from './CacheManager';
- packages/knowledge/src/services-index.ts:65:export type { CachedFileInfo, ExportMapEntry as CacheExportMapEntry } from './CacheManager';
- packages/knowledge/src/services-index.ts:80:export { RelationshipBuilder } from './RelationshipBuilder';
- packages/knowledge/src/services-index.ts:81:export type { RelationshipBuilderOptions } from './RelationshipBuilder';
- packages/knowledge/src/parsing/DirectoryHandler.ts:18:} from './utils';
- packages/knowledge/src/index.ts:3:export * from './types';
- packages/knowledge/src/index.ts:4:export * from './queries';
- packages/knowledge/src/index.ts:5:export * from './utils';
- packages/knowledge/src/parsing/ASTParserCore.ts:44:} from './utils';
- packages/knowledge/src/parsing/ASTParserCore.ts:51:} from './types';
- packages/knowledge/src/parsing/ASTParserCore.ts:54:import { CacheManager, CachedFileInfo } from './CacheManager';
- packages/knowledge/src/parsing/ASTParserCore.ts:62:} from './RelationshipBuilder';
- packages/knowledge/src/parsing/ASTParserCore.ts:71:} from './types';
- packages/knowledge/src/parsing/IncrementalParser.ts:13:import { createHash } from './utils';
- packages/knowledge/src/parsing/IncrementalParser.ts:21:} from './types';
- packages/knowledge/src/orchestration/CacheManager.ts:11:import { createHash } from './utils';
- packages/knowledge/src/orchestration/CacheManager.ts:12:import { CachedFileInfo, ExportMapEntry } from './types';
- packages/knowledge/src/ingestion/error-handler.ts:14:} from './types';
- packages/knowledge/src/ingestion/queue-manager.ts:16:} from './types';
- packages/knowledge/src/ingestion/batch-processor.ts:23:} from './types';
- packages/knowledge/src/parsing/SymbolExtractor.ts:23:} from './utils';
\n2025-09-30T02:16:08Z — Implementation Notes
- Updated parsing imports to use '@memento/knowledge/*' for intra-package modules (utils, types, orchestration, graph).
- Corrected StatsCollector to import Neo4jService and queries via '@memento/knowledge/*'.
- Left barrel export paths unchanged (they are re-exports, not imports).
\n2025-09-30T02:16:08Z — Validation Evidence
Planned: run 'pnpm exec tsc -p packages/knowledge/tsconfig.json --noEmit' and grep for 'Cannot find module' to confirm fixes.
\n2025-09-30T02:17:48Z — Validation Evidence
- Ran: pnpm exec tsc -p packages/knowledge/tsconfig.json --noEmit > logs/knowledge-typecheck-20250930_0226.log 2>&1
- Check: grep TS2307/Cannot find module → 0 matches after fixes (parsing + orchestration).
- Log excerpt:
\n2025-09-30T02:17:48Z — Open Follow-ups
- Non-TS2307 errors remain in knowledge package (outside Task 16 scope); see Task 17 (duplicate exports) and Task 15 (ingestion), plus API tasks 18–20.
\n2025-09-30T02:20:55Z — Validation Evidence
- Final check: no TS2307 in parsing after alias fixes (logs/knowledge-typecheck-20250930_0234.log).
\n2025-09-30T02:20:55Z — Open Follow-ups
- Leave local relative imports as-is when not erroring (per user guidance).
- Next candidates: Task 17 (duplicate type exports) and continue Task 14 (shared-type exports) to reduce remaining 143 typecheck lines.
