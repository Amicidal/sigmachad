# Session Journal: 2025-09-29_1917 - Fix Cross-Package Import Depth Violations

## Task & Definition
- **Task ID**: 2025-09-29.4 from TODO.md
- **Objective**: Remove deep (`../../../`) relative imports across packages, enforce the policy via ESLint, and document acceptable import patterns.

## Constraints/Risks
- Monorepo depth limit (max three levels) requires alias usage without introducing new circular dependencies.
- Workspace already contains numerous unrelated changes; avoid touching files outside the scope of offending imports.
- New lint guard should not break directories still relying on deep imports (notably `tests/`), so enforcement must be scoped carefully.

## Code Searches
1. `rg -l "\\.\\./\\.\\./\\.\\./" packages` → Identified 12 package-local files with depth violations (knowledge tests, testing utils, core session tests).
2. `rg -l "\\.\\./\\.\\./\\.\\./"` (repo-wide) → Confirmed extensive remaining violations under `tests/` and documentation, motivating a follow-up task.

## Web Searches
- None.

## Implementation Notes
- Repointed knowledge ingestion tests and OGM services to use `@memento/*` aliases instead of deep relative paths; removed stale `.js` suffixes.
- Updated performance benchmark temp-directory resolution to compute base paths without embedding `../../../` strings.
- Rewired core session tests to consume services through `@memento/core` imports and adjusted Vitest config helpers to resolve via computed roots.
- Scoped a new ESLint `no-restricted-imports` rule to `packages/**/*.ts`, preventing future deep imports in package code while avoiding immediate breaks in the broader test suite.
- Authored `Docs/Guides/coding-standards.md` capturing the import-depth policy and recommended alias usage.
- Added backlog item 2025-09-29.10 to cover remaining deep imports in the test directories.

## Validation Evidence
- `pnpm exec eslint <modified files>` (console) → Verified no `@memento` alias regressions, but lint surfaced pre-existing unused-variable issues in several core/knowledge tests. No `no-restricted-imports` violations after refactor. Further cleanup deferred to follow-up task 2025-09-29.10.

## Open Follow-ups
- See TODO.md item 2025-09-29.10 for extending the depth guard to the `tests/**` tree once aliases are updated.
