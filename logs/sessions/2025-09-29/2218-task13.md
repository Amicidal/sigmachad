## Task & Definition
- Address TODO Task 2025-09-29.13: migrate configuration/security/rollback unit suites off Falkor-specific mocks toward Neo4j graph APIs, ensuring tests compile and type-check while retaining necessary backward compatibility semantics.

## Constraints/Risks
- Monorepo depth and import rules must stay within policy (no paths deeper than three levels, no deep relative imports).
- DatabaseService currently exposes Falkor aliases; updating to graph APIs risks breaking other suites—must preserve compatibility fields while shifting defaults.
- RealisticNeo4jMock query signature differs from Neo4j driver; need to guard DatabaseService.graphQuery to handle mock outputs without destabilizing production behavior.
- Removing `@ts-nocheck` may surface latent typing gaps; must budget time for typings.

## Code Searches
- `rg "Falkor" tests/unit/services` → inventory remaining Falkor references across target suites; confirmed heavy usage in configuration/security/rollback tests.
- `rg --files -g '*ConfigurationService.ts' packages` + `sed` → reviewed ConfigurationService implementation; identified direct Falkor references and database status/health structures.
- `rg "RealisticNeo4j" tests/unit/services` → inspected prior migrations (backup/maintenance) for patterns when wiring mocks via neo4jFactory.

## Web Searches
- None (network access restricted and existing repo context sufficient).

## Implementation Notes
- Updated `packages/database/src/DatabaseService.ts` `graphQuery` to normalize Neo4j driver vs. lightweight mock outputs so graph lookups succeed when RealisticNeo4jMock returns plain arrays.
- Refactored `packages/core/src/services/ConfigurationService.ts` to promote Neo4j as primary database status, replacing direct Falkor usage with `graphQuery`, introducing `neo4j` health/status fields, and backfilling deprecated `falkordb` aliases for consumers.
- Introduced `packages/testing/src/security/graph-utils.ts` to centralize graph access helpers that prefer `graphQuery`/`graphCommand` while falling back to legacy aliases, and rewired security scanner/report/incremental modules to consume it.
- Reworked security and rollback unit suites to leverage lightweight Neo4j mocks: updated configurations to the new `neo4j` shape, replaced Falkor mock imports, removed `@ts-nocheck`, and aligned spies/assertions with `graphQuery`/`graphCommand` and the neo4j health alias.

## Validation Evidence
- `pnpm exec tsc -p tsconfig.test.json --noEmit` → see `logs/typecheck-2025-09-29_task13.log`; command failed with pre-existing API/shared-type discrepancies (e.g., missing exports in @memento/core and @memento/shared-types).

## Open Follow-ups
- Global type-check still fails due to unresolved API/shared-type exports; tracked via TODO item 2025-09-30.1.
