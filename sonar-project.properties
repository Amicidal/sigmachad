# SonarQube Configuration for Sigmachad Monorepo
# Project identification
sonar.projectKey=sigmachad
sonar.projectName=Sigmachad Knowledge Graph
sonar.projectVersion=1.0.0

# Source code directories
sonar.sources=packages,apps
sonar.tests=tests

# Language settings
sonar.language=ts,js
sonar.javascript.node.maxspace=8192
sonar.typescript.tsconfigPaths=tsconfig.json,packages/*/tsconfig.json

# Exclusions - Skip generated, vendor, and test files from analysis
sonar.exclusions=\
  **/node_modules/**,\
  **/dist/**,\
  **/build/**,\
  **/*.spec.ts,\
  **/*.test.ts,\
  **/tests/**,\
  **/__tests__/**,\
  **/*.d.ts,\
  **/coverage/**,\
  **/.next/**,\
  **/public/**,\
  **/*.config.js,\
  **/*.config.ts,\
  **/migrations/**,\
  **/*.min.js,\
  **/*.bundle.js,\
  **/vendor/**,\
  **/.cache/**,\
  **/tmp/**,\
  **/temp/**,\
  **/logs/**,\
  **/*.map,\
  **/tsconfig.tsbuildinfo,\
  packages/api/fix-imports.js,\
  packages/api/revert-imports.js,\
  packages/api/temp-fix-imports.js

# Test file inclusions
sonar.test.inclusions=**/*.test.ts,**/*.spec.ts,**/*.test.js,**/*.spec.js

# Coverage reporting
sonar.javascript.lcov.reportPaths=coverage/lcov.info
sonar.typescript.lcov.reportPaths=coverage/lcov.info

# Code duplication detection
sonar.cpd.exclusions=\
  **/*.test.ts,\
  **/*.spec.ts,\
  **/tests/**,\
  **/migrations/**,\
  **/*.d.ts

# Encoding
sonar.sourceEncoding=UTF-8

# TypeScript/JavaScript specific settings
sonar.typescript.eslint.reportPaths=eslint-report.json
sonar.eslint.reportPaths=eslint-report.json

# Quality Gate Settings
sonar.qualitygate.wait=true

# Branch analysis
sonar.branch.autoconfig.disabled=false

# Security Hotspots Review Priority
sonar.security.hotspots.maxIssues=20

# Custom rule severity overrides for TypeScript
# Focus on critical issues that matter for your codebase
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5,e6

# Ignore console.log in development files
sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S106
sonar.issue.ignore.multicriteria.e1.resourceKey=**/scripts/**,**/examples/**,**/demos/**

# Ignore TODO comments (tracked separately)
sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S1135
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*

# Ignore any usage in test files
sonar.issue.ignore.multicriteria.e3.ruleKey=typescript:S1117
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*.test.ts,**/*.spec.ts

# Allow type assertions in migration files
sonar.issue.ignore.multicriteria.e4.ruleKey=typescript:S4325
sonar.issue.ignore.multicriteria.e4.resourceKey=**/migrations/**

# Allow magic numbers in config files
sonar.issue.ignore.multicriteria.e5.ruleKey=typescript:S109
sonar.issue.ignore.multicriteria.e5.resourceKey=**/*.config.ts,**/*.config.js

# Allow large files for generated code
sonar.issue.ignore.multicriteria.e6.ruleKey=typescript:S138
sonar.issue.ignore.multicriteria.e6.resourceKey=**/generated/**,**/*.generated.ts

# Server Configuration
sonar.host.url=http://localhost:9000

# Authentication (choose one method)
# Option 1: Token authentication (recommended)
sonar.token=squ_5bccbc30d7bdc8eda20bf09b93b6cad47884280c

# Option 2: Username/password (less secure)
# sonar.login=admin
# sonar.password=admin

# Performance optimizations
sonar.scm.disabled=false
sonar.scm.provider=git